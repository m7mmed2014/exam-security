<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุชุญุงู ูุญูู</title>

    <script>
        let exitAttempts = 0; // ุนุฏุฏ ูุญุงููุงุช ุงูุฎุฑูุฌ
        let allowedIP = null; // ูุชุฎุฒูู ุงูู IP ุงูุฃูู ุงูุฐู ุฏุฎู ููู ุงูุทุงูุจ

        // ๐น ุชุนุทูู ุงููุณุฎ ูุงููุตู ูุงูููุฑ ุจุฒุฑ ุงููุฃุฑุฉ ุงูุฃููู
        document.addEventListener("contextmenu", function(e) {
            e.preventDefault();
        });

        document.addEventListener("keydown", function(e) {
            if (e.ctrlKey && (e.key === "c" || e.key === "x" || e.key === "v" || e.key === "u" || e.key === "p" || e.key === "s" || e.key === "a" || e.key === "i")) {
                e.preventDefault();
            }
            if (e.key === "F12" || (e.ctrlKey && e.shiftKey && e.key === "I")) {
                e.preventDefault();
            }
        });

        // ๐ ุฅุบูุงู ุงูุตูุญุฉ ุชููุงุฆููุง ุจุนุฏ ุฏูููุฉ ูุงุญุฏุฉ (60 ุซุงููุฉ)
        setTimeout(function() {
            alert("โณ ุงูุชูู ุงูููุช! ุณูุชู ุฅุบูุงู ุงูุตูุญุฉ ุงูุขู.");
            window.close();
        }, 60 * 1000); // 60 ุซุงููุฉ = 1 ุฏูููุฉ

        // ๐ ุฌูุจ ุงูู IP ูููุน ุงููุชุญ ุฃูุซุฑ ูู ูุฑุฉ ูู ููุณ ุงูู IP
        function getIPAddress() {
            fetch("https://api64.ipify.org?format=json")
            .then(response => response.json())
            .then(data => {
                let currentIP = data.ip;
                console.log("๐ ุนููุงู IP ุงูุฎุงุต ุจู:", currentIP);

                if (allowedIP === null) {
                    allowedIP = currentIP; // ุญูุธ ุงูู IP ุงูุฃูู
                    localStorage.setItem("examAllowedIP", allowedIP);
                } else if (currentIP !== allowedIP) {
                    alert("โ ูุง ููููู ูุชุญ ุงูุงูุชุญุงู ูู ุฃูุซุฑ ูู ุฌูุงุฒ ุจููุณ ุงูู IP!");
                    window.close();
                }
            })
            .catch(error => {
                console.error("โ ุฎุทุฃ ูู ุฌูุจ ุนููุงู IP:", error);
            });
        }

        // ๐ ุฅุฎูุงุก ุฑุงุจุท Google Form ูุงุณุชุฎุฏุงู ูุชุบูุฑ ูุดูุฑ
        function getExamURL() {
            let encodedURL = "aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZm9ybXMvZC8xRkFJcFFMU2Z1R2gyN2tYcm9HdnExdElETTdUTEV1ZFZ6M2MwTHdwMXozbmZHMUJHTU9OWHBvQQ=="; // ๐น ุฑุงุจุท ุงูููุฑู ูุดูุฑ ุจู Base64
            return atob(encodedURL); // ูู ุชุดููุฑ Base64
        }

        // ๐ ูุชุญ ูููุฐุฌ ุงูุงูุชุญุงู ูู ูุงูุฐุฉ ููุจุซูุฉ ูุน ุฅุฎูุงุก ุงูุฑุงุจุท
        function openExamWindow() {
            getIPAddress(); // ุฌูุจ ุงูู IP ุฃููุงู

            var examUrl = getExamURL(); // ๐น ุฌูุจ ุงูุฑุงุจุท ุงููุฎูู
            var examWindow = window.open(examUrl, "_blank", "width=800,height=600");

            if (!examWindow) {
                alert("โ๏ธ ูุฑุฌู ุงูุณูุงุญ ุจูุชุญ ุงูููุงูุฐ ุงูููุจุซูุฉ ูุนุฑุถ ุงูุงูุชุญุงู!");
            }
        }

        // ๐ ุชุญุฐูุฑ ุนูุฏ ูุญุงููุฉ ุงูุฎุฑูุฌ ูู ุงูุตูุญุฉ (ุงููุฑุฉ ุงูุซุงูุซุฉ ุชูุบูู ุงูุตูุญุฉ)
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                exitAttempts++; // ุฒูุงุฏุฉ ุนุฏุฏ ุงููุญุงููุงุช
                
                if (exitAttempts < 3) {
                    alert("โ ุชุญุฐูุฑ: ูุฐู ูู ุงููุญุงููุฉ " + exitAttempts + " ููุฎุฑูุฌ ูู ุงูุตูุญุฉ. ูู ุงููุญุงููุฉ ุงูุซุงูุซุฉ ุณูุชู ุฅุบูุงู ุงูุงูุชุญุงู!");
                } else {
                    alert("โ ููุฏ ุญุงููุช ุงูุฎุฑูุฌ 3 ูุฑุงุช! ุณูุชู ุฅุบูุงู ุงูุงูุชุญุงู ุงูุขู.");
                    window.close();
                }
            }
        });

        // ๐ ุฅุบูุงู ุงูุงูุชุญุงู ุฅุฐุง ุญุงูู ุงูุทุงูุจ ุชุตุบูุฑ ุงููุงูุฐุฉ ุฃู ุชุบููุฑ ุญุฌููุง
        window.addEventListener('resize', function() {
            if (window.outerWidth < 600 || window.outerHeight < 400) {
                alert("โ ูุง ููุณูุญ ุจุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ ุฃุซูุงุก ุงูุงูุชุญุงู! ุณูุชู ุฅุบูุงู ุงูุงูุชุญุงู ุงูุขู.");
                window.close();
            }
        });

        // ๐ ุฅุบูุงู ุงูุงูุชุญุงู ุฅุฐุง ูุงู ุงูุทุงูุจ ุจุนูู Minimize (ุชุตุบูุฑ ุงููุชุตูุญ)
        let isMinimized = false;
        window.addEventListener("blur", function() {
            if (document.visibilityState === "hidden") {
                isMinimized = true;
                alert("โ ูุง ููููู ุชุตุบูุฑ ุงููุชุตูุญ ุฃุซูุงุก ุงูุงูุชุญุงู! ุณูุชู ุฅุบูุงู ุงูุงูุชุญุงู.");
                window.close();
            }
        });

    </script>

    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 50px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body onload="openExamWindow()">
    <h2>๐ ุงูุชุญุงู ูุญูู - ููุฑุฌู ุนุฏู ุงูุบุด</h2>
    
    <p>โ ุณูุชู ูุชุญ ุงูุงูุชุญุงู ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ. ุฅุฐุง ูู ูููุชุญุ ุงุถุบุท ุนูู ุงูุฒุฑ ุฃุฏูุงู:</p>
    <button onclick="openExamWindow()">๐ ูุชุญ ุงูุงูุชุญุงู</button>

    <p>โ๏ธ ููุงุญุธุงุช:</p>
    <ul>
        <li>โ ูุง ูููู ุงููุณุฎ ุฃู ุงููุตู ุฃุซูุงุก ุงูุงูุชุญุงู.</li>
        <li>โ ุณูุชู ุชุญุฐูุฑู ูุฑุชูู ุฅุฐุง ุญุงููุช ุงูุฎุฑูุฌุ ููู ุงููุฑุฉ ุงูุซุงูุซุฉ ุณูุชู **ุฅุบูุงู ุงูุงูุชุญุงู!**</li>
        <li>โณ ุณูุชู ุฅุบูุงู ุงูุตูุญุฉ ุชููุงุฆููุง ุจุนุฏ **ุฏูููุฉ ูุงุญุฏุฉ**.</li>
        <li>โ ุณูุชู ุฅุบูุงู ุงูุตูุญุฉ ุฅุฐุง ุญุงููุช ุชุบููุฑ ุญุฌู ุงููุงูุฐุฉ.</li>
        <li>โ ุณูุชู ุฅุบูุงู ุงูุตูุญุฉ ุฅุฐุง ุญุงููุช ุชุตุบูุฑ ุงููุชุตูุญ (Minimize).</li>
        <li>๐ ูุง ูููู ูุชุญ ุงูุงูุชุญุงู ุฃูุซุฑ ูู ูุฑุฉ ุจููุณ ุงูู IP.</li>
    </ul>
</body>
</html>
